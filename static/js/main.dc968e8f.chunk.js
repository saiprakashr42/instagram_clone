(this.webpackJsonpinstaclone=this.webpackJsonpinstaclone||[]).push([[0],{49:function(e,t,a){},50:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(2),c=a.n(s),r=a(16),o=a.n(r),i=a(13),l=(a(49),a.p+"static/media/loggo.5a7d6a15.svg"),u=(a(50),a(86)),p=a(21),d=p.a.initializeApp({apiKey:"AIzaSyB8Rem2NGkai-ArZzFfjFFnVXV2U_imbcQ",authDomain:"instagram-clone-8e3aa.firebaseapp.com",databaseURL:"https://instagram-clone-8e3aa.firebaseio.com",projectId:"instagram-clone-8e3aa",storageBucket:"instagram-clone-8e3aa.appspot.com",messagingSenderId:"595001237363",appId:"1:595001237363:web:94b6b72e4796dd95576f06",measurementId:"G-V2F1WJBZSZ"}).firestore(),j=p.a.auth(),m=p.a.storage();var b=function(e){var t=e.username,a=e.user,c=e.postId,r=e.caption,o=e.imageUrl,l=Object(s.useState)([]),j=Object(i.a)(l,2),m=j[0],b=j[1],h=Object(s.useState)(""),O=Object(i.a)(h,2),g=O[0],f=O[1];return Object(s.useEffect)((function(){var e;return c&&(e=d.collection("posts").doc(c).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[c]),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post_header",children:[Object(n.jsx)(u.a,{className:"post_avatar",alt:"Saiprakashr42",src:""}),Object(n.jsx)("h3",{children:t})]}),Object(n.jsx)("img",{className:"post_image",src:o,alt:"sample"}),Object(n.jsxs)("h4",{className:"post_text",children:[Object(n.jsx)("strong",{children:t}),": ",r," "]}),Object(n.jsx)("div",{className:"post_comments",children:m.map((function(e){return Object(n.jsxs)("p",{children:[Object(n.jsxs)("strong",{children:[e.username,":"]}),e.text]})}))}),a&&Object(n.jsxs)("form",{className:"post_commentBox",children:[Object(n.jsx)("input",{className:"post_input",type:"text",placeholder:"Add a comment..",value:g,onChange:function(e){return f(e.target.value)}}),Object(n.jsx)("button",{className:"post_button",disabled:!g,type:"submit",onClick:function(e){e.preventDefault(),d.collection("posts").doc(c).collection("comments").add({text:g,username:a.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp()}),f("")},children:"Post"})]})]})},h=a(82),O=a(85),g=a(84),f=a(83);a(59);var x=function(e){var t=e.username,a=Object(s.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(s.useState)(null),u=Object(i.a)(l,2),j=u[0],b=u[1],h=Object(s.useState)(""),O=Object(i.a)(h,2),f=O[0],x=O[1];return Object(n.jsxs)("div",{className:"imageUpload",children:[Object(n.jsx)("progress",{className:"imageupload_progress",value:f,max:"100"}),Object(n.jsx)("input",{type:"text",placeholder:"Enter caption..",onChange:function(e){return o(e.target.value)},value:r}),Object(n.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&b(e.target.files[0])}}),Object(n.jsx)(g.a,{className:"imageupload_button",onClick:function(){m.ref("images/".concat(j.name)).put(j).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);x(t)}),(function(e){console.log(e),alert(e.message)}),(function(){m.ref("images").child(j.name).getDownloadURL().then((function(e){d.collection("posts").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),caption:r,imageUrl:e,username:t}),x(0),o(""),b(null)}))}))},children:"Upload"})]})};function v(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var N=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var S=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(!1),o=Object(i.a)(r,2),u=o[0],p=o[1],m=Object(s.useState)(!1),h=Object(i.a)(m,2),S=h[0],y=h[1],C=Object(s.useState)(),_=Object(i.a)(C,2),I=_[0],k=_[1],U=Object(s.useState)(),w=Object(i.a)(U,2),F=w[0],B=w[1],A=Object(s.useState)(),E=Object(i.a)(A,2),L=E[0],D=E[1],P=Object(s.useState)(null),T=Object(i.a)(P,2),V=T[0],z=T[1],J=N(),R=Object(s.useState)(v),W=Object(i.a)(R,1)[0];return Object(s.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(s.useEffect)((function(){var e=j.onAuthStateChanged((function(e){e?(console.log(e),z(e)):z(null)}));return function(){e()}}),[V,I]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(f.a,{open:u,onClose:function(){return p(!1)},children:Object(n.jsx)("div",{style:W,className:J.paper,children:Object(n.jsxs)("center",{children:[Object(n.jsx)("img",{className:"header_Image",src:l,alt:"insta"}),Object(n.jsxs)("form",{className:"app_signUp",children:[Object(n.jsx)(O.a,{placeholder:"username",type:"text",value:I,onChange:function(e){return k(e.target.value)}}),Object(n.jsx)(O.a,{placeholder:"email",type:"text",value:F,onChange:function(e){return B(e.target.value)}}),Object(n.jsx)(O.a,{placeholder:"password",type:"password",value:L,onChange:function(e){return D(e.target.value)}}),Object(n.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),j.createUserWithEmailAndPassword(F,L).then((function(e){return e.user.updateProfile({displayName:I})})).catch((function(e){return alert(e.message)})),p(!1)},children:"Sign Up"})]})]})})}),Object(n.jsx)(f.a,{open:S,onClose:function(){return y(!1)},children:Object(n.jsx)("div",{style:W,className:J.paper,children:Object(n.jsxs)("center",{children:[Object(n.jsx)("img",{className:"header_Image",src:l,alt:"insta"}),Object(n.jsxs)("form",{className:"app_signUp",children:[Object(n.jsx)(O.a,{placeholder:"email",type:"text",value:F,onChange:function(e){return B(e.target.value)}}),Object(n.jsx)(O.a,{placeholder:"password",type:"password",value:L,onChange:function(e){return D(e.target.value)}}),Object(n.jsx)(g.a,{type:"submit",onClick:function(e){e.preventDefault(),j.signInWithEmailAndPassword(F,L).catch((function(e){return alert(e.message)})),y(!1)},children:"Sign In"})]})]})})}),Object(n.jsxs)("div",{className:"app_header",children:[Object(n.jsx)("img",{className:"header_Image",src:l,alt:"insta"}),V?Object(n.jsx)(g.a,{onClick:function(){return j.signOut()},children:"Logout "}):Object(n.jsxs)("div",{className:"app_loginContainer",children:[Object(n.jsx)(g.a,{onClick:function(){return y(!0)},children:"Sign In"}),Object(n.jsx)(g.a,{onClick:function(){return p(!0)},children:"Sign Up"})]})]}),Object(n.jsx)("div",{className:"app_posts",children:Object(n.jsx)("div",{className:"app_postsLeft",children:a.map((function(e){var t=e.id,a=e.post;return Object(n.jsx)(b,{postId:t,username:a.username,user:V,caption:a.caption,imageUrl:a.imageUrl},t)}))})}),(null===V||void 0===V?void 0:V.displayName)?Object(n.jsx)(x,{username:V.displayName}):Object(n.jsx)("h3",{children:"Login to upload"})]})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,88)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),y()}},[[60,1,2]]]);
//# sourceMappingURL=main.dc968e8f.chunk.js.map